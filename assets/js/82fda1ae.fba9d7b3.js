"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[20],{3905:function(e,n,t){t.d(n,{Zo:function(){return l},kt:function(){return f}});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=r.createContext({}),p=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},l=function(e){var n=p(e.components);return r.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),g=p(t),f=o,m=g["".concat(c,".").concat(f)]||g[f]||u[f]||a;return t?r.createElement(m,i(i({ref:n},l),{},{components:t})):r.createElement(m,i({ref:n},l))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=g;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var p=2;p<a;p++)i[p]=t[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},33186:function(e,n,t){t.r(n),t.d(n,{assets:function(){return l},contentTitle:function(){return c},default:function(){return f},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var r=t(87462),o=t(63366),a=(t(67294),t(3905)),i=["components"],s={},c="\u89e3\u8bfbantd\u7684\u6784\u5efa\u6d41\u7a0b",p={unversionedId:"webpack/antd-start",id:"webpack/antd-start",title:"\u89e3\u8bfbantd\u7684\u6784\u5efa\u6d41\u7a0b",description:"\u9996\u5148\u4eceantd\u7684\u9879\u76ee\u542f\u52a8\u811a\u672c\u5f00\u59cb",source:"@site/docs/webpack/antd-start.md",sourceDirName:"webpack",slug:"/webpack/antd-start",permalink:"/Blog/docs/webpack/antd-start",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u4e00\u770b\u5c31\u4f1a\u7684webpack loader\u53caplugin\u8be6\u89e3",permalink:"/Blog/docs/webpack/loader&&plugin"},next:{title:"webpack\u9879\u76ee\u914d\u7f6e\u5408\u9002\u7684\u591a\u73af\u5883Api\u5c42",permalink:"/Blog/docs/webpack/multi_env"}},l={},u=[],g={toc:u};function f(e){var n=e.components,t=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u89e3\u8bfbantd\u7684\u6784\u5efa\u6d41\u7a0b"},"\u89e3\u8bfbantd\u7684\u6784\u5efa\u6d41\u7a0b"),(0,a.kt)("p",null,"\u9996\u5148\u4eceantd\u7684\u9879\u76ee\u542f\u52a8\u811a\u672c\u5f00\u59cb"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'"start": "antd-tools run clean && cross-env NODE_ENV=development concurrently \\"bisheng start -c ./site/bisheng.config.js\\"",\n')),(0,a.kt)("p",null,"[antd-tools]"," \u662fantd-tools run clean \u4e3b\u8981\u662f\u6e05\u9664\u9879\u76ee\u4e2d\u7684\u7f13\u5b58\u6587\u4ef6\uff0c\u4e3b\u8981\u662f\u901a\u8fc7 bisheng start -c ./site/bisheng \u53bb\u542f\u52a8\u7684"),(0,a.kt)("p",null,"\u7136\u540e\u6765\u5230@node_modules/bisheng \u4e0b\u67e5\u770b ","[package.json]"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'"bin": {\n    "bisheng": "bin/bisheng"\n},\n')),(0,a.kt)("p",null,"\u4e4b\u540e\u89c6\u89d2\u6765\u5230 @node_modules/bisheng/bin/bisheng \u4e0b\u662f\u4e00\u4e2a\u811a\u672c\u6587\u4ef6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"#!/usr/bin/env node\n\nconst program = require('commander');\nconst package = require('../package.json');\n\nprogram\n  .version(package.version)\n  .usage('[command] [options]')\n  .command('start [options]', 'to start a server')\n  .command('build [options]', 'to build and write static files to `config.output`')\n  .command('gh-pages [options]', 'to deploy website to gh-pages')\n  .parse(process.argv);\n\nprocess.on('SIGINT', function() {\n  program.runningCommand && program.runningCommand.kill('SIGKILL');\n  process.exit(0);\n});\n")),(0,a.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u901a\u8fc7\u8f93\u5165\u7684\u547d\u4ee4\u53bb\u542f\u52a8\u4e0d\u540c\u7684\u6587\u4ef6,\u5176\u4e2d bisheng-start\u6765\u5230"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"#!/usr/bin/env node\n\nconst program = require('commander');\nconst BiSheng = require('../lib');\n\nprogram\n  .option('-c, --config <path>', 'set config path. defaults to ./bisheng.config.js')\n  .parse(process.argv);\n\nBiSheng.start(program);\n\n")),(0,a.kt)("p",null,"\u63a5\u7740\u6765\u5230 @node_modules/bisheng/lib/index \u4e0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"exports.start = function start(program) {\n  var configFile = path.join(process.cwd(), program.config || 'bisheng.config.js');\n  // \n  var bishengConfig = getBishengConfig(configFile);\n  var themeConfig = getThemeConfig(bishengConfig.theme);\n  context.initialize({\n    bishengConfig: bishengConfig,\n    themeConfig: themeConfig\n  });\n  mkdirp.sync(bishengConfig.output);\n  var template = fs.readFileSync(bishengConfig.htmlTemplate).toString(); // dev manifest\n\n  var manifest = {\n    js: [\"\".concat(bishengConfig.entryName, \".js\")],\n    // inject style\n    css: []\n  };\n\n  var templateData = _objectSpread({\n    root: '/',\n    manifest: manifest\n  }, bishengConfig.htmlTemplateExtraData || {});\n\n  var templatePath = path.join(process.cwd(), bishengConfig.output, 'index.html');\n  fs.writeFileSync(templatePath, nunjucks.renderString(template, templateData));\n  generateEntryFile(bishengConfig.theme, bishengConfig.entryName, '/');\n  var webpackConfig = (0, _updateWebpackConfig[\"default\"])((0, _getWebpackCommonConfig[\"default\"])(), 'start');\n  webpackConfig.plugins.push(new webpack.HotModuleReplacementPlugin());\n  webpackConfig.plugins.push(new webpack.DefinePlugin({\n    'process.env': {\n      NODE_ENV: JSON.stringify(process.env.NODE_ENV || 'development')\n    }\n  }));\n\n  var serverOptions = _objectSpread({\n    quiet: true,\n    hot: true\n  }, bishengConfig.devServerConfig, {\n    contentBase: path.join(process.cwd(), bishengConfig.output),\n    historyApiFallback: true,\n    host: 'localhost'\n  });\n\n  WebpackDevServer.addDevServerEntrypoints(webpackConfig, serverOptions);\n  var compiler = webpack(webpackConfig);\n  var server = new WebpackDevServer(compiler, serverOptions);\n  server.listen(bishengConfig.port, '0.0.0.0', function () {\n    return (0, _openBrowser[\"default\"])(\"http://localhost:\".concat(bishengConfig.port));\n  });\n};\n\n")))}f.isMDXComponent=!0}}]);